"use strict";(()=>{var a={};a.id=268,a.ids=[268,839],a.modules={361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},2015:a=>{a.exports=require("react")},2326:a=>{a.exports=require("react-dom")},3873:a=>{a.exports=require("path")},4075:a=>{a.exports=require("zlib")},5952:(a,b,c)=>{c.r(b),c.d(b,{config:()=>B,default:()=>x,getServerSideProps:()=>A,getStaticPaths:()=>z,getStaticProps:()=>y,handler:()=>J,reportWebVitals:()=>C,routeModule:()=>I,unstable_getServerProps:()=>G,unstable_getServerSideProps:()=>H,unstable_getStaticParams:()=>F,unstable_getStaticPaths:()=>E,unstable_getStaticProps:()=>D});var d={};c.r(d),c.d(d,{default:()=>v,getServerSideProps:()=>u});var e=c(3885),f=c(237),g=c(1413),h=c(5611),i=c.n(h),j=c(625),k=c.n(j),l=c(8732),m=c(2015),n=c(9788),o=c.n(n),p=c(6761),q=c.n(p),r=c(9918),s=c.n(r),t=c(4233);let u=async({query:a})=>{let{page:b="1",category:c,sort:d,minPrice:e,maxPrice:f}=a,g=new URLSearchParams({page:String(b),limit:"12",...c&&{category:String(c)},...d&&{sort:String(d)},...e&&{minPrice:String(e)},...f&&{maxPrice:String(f)}});try{let a=await fetch(`http://localhost:5000/api/products?${g}`);if(!a.ok)throw Error("Failed to fetch products");let b=await a.json(),c=await fetch("http://localhost:5000/api/categories");if(!c.ok)throw Error("Failed to fetch categories");let d=await c.json();return{props:{initialProducts:b.products,categories:d,totalProducts:b.total}}}catch(a){return console.error("Error fetching data:",a),{props:{initialProducts:[],categories:[],totalProducts:0}}}},v=({initialProducts:a,categories:b,totalProducts:c})=>{(0,t.useRouter)();let[d,e]=(0,m.useState)(a),[f,g]=(0,m.useState)(!1),[h,i]=(0,m.useState)(null),[j,k]=(0,m.useState)(1),[n,p]=(0,m.useState)(""),[r,u]=(0,m.useState)("newest"),[v,w]=(0,m.useState)({min:"",max:""}),x=Math.ceil(c/12);(0,m.useEffect)(()=>{(async()=>{g(!0),i(null);try{let a=new URLSearchParams({page:j.toString(),limit:"12",...n&&{category:n},...r&&{sort:r},...v.min&&{minPrice:v.min},...v.max&&{maxPrice:v.max}}),b=await fetch("/api/products?"+a.toString());if(!b.ok)throw Error("Failed to fetch products");let c=await b.json();e(c.products)}catch(a){console.error("Error fetching products:",a),i(a instanceof Error?a.message:"Failed to fetch products"),e([])}finally{g(!1)}})()},[j,n,r,v]);let y=a=>{p(a),k(1)},z=(a,b)=>{w({min:a,max:b}),k(1)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o(),{children:[(0,l.jsx)("title",{children:"Our Products - Replax"}),(0,l.jsx)("meta",{name:"description",content:"Browse our collection of quality products"})]}),(0,l.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Categories"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("button",{onClick:()=>y(""),className:`w-full text-left px-3 py-2 rounded ${""===n?"bg-primary text-white":"hover:bg-gray-100"}`,children:"All Categories"}),b.map(a=>(0,l.jsx)("button",{onClick:()=>y(a._id),className:`w-full text-left px-3 py-2 rounded ${n===a._id?"bg-primary text-white":"hover:bg-gray-100"}`,children:a.name},a._id))]})]}),(0,l.jsxs)("div",{className:"flex-[3]",children:[(0,l.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4",children:[(0,l.jsxs)("select",{value:r,onChange:a=>{u(a.target.value),k(1)},className:"px-4 py-2 border rounded",children:[(0,l.jsx)("option",{value:"newest",children:"Newest First"}),(0,l.jsx)("option",{value:"price_asc",children:"Price: Low to High"}),(0,l.jsx)("option",{value:"price_desc",children:"Price: High to Low"}),(0,l.jsx)("option",{value:"name_asc",children:"Name: A to Z"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"number",placeholder:"Min Price",value:v.min,onChange:a=>z(a.target.value,v.max),className:"w-24 px-3 py-2 border rounded"}),(0,l.jsx)("span",{children:"-"}),(0,l.jsx)("input",{type:"number",placeholder:"Max Price",value:v.max,onChange:a=>z(v.min,a.target.value),className:"w-24 px-3 py-2 border rounded"})]})]}),h&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:(0,l.jsx)("p",{className:"text-red-600",children:h})}),f?(0,l.jsx)("div",{className:"h-96 flex items-center justify-center",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:d.map(a=>(0,l.jsx)(s(),{href:`/products/${a.slug}`,className:"group block",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transition-transform duration-300 group-hover:scale-105",children:[(0,l.jsx)("div",{className:"relative h-48",children:(0,l.jsx)(q(),{src:a.images[0],alt:a.name,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"cover"}})}),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold truncate",children:a.name}),(0,l.jsx)("p",{className:"text-gray-600 text-sm",children:a.brand.name}),(0,l.jsxs)("div",{className:"mt-2 flex items-baseline gap-2",children:[(0,l.jsxs)("span",{className:"text-xl font-bold",children:["₹",a.price]}),a.comparePrice&&(0,l.jsxs)("span",{className:"text-gray-500 line-through text-sm",children:["₹",a.comparePrice]})]})]})]})},a._id))}),x>1&&(0,l.jsx)("div",{className:"mt-8 flex justify-center gap-2",children:Array.from({length:x},(a,b)=>b+1).map(a=>(0,l.jsx)("button",{onClick:()=>k(a),className:`px-4 py-2 rounded ${j===a?"bg-primary text-white":"bg-gray-200 hover:bg-gray-300"}`,children:a},a))})]})]})})]})};var w=c(2289);let x=(0,g.M)(d,"default"),y=(0,g.M)(d,"getStaticProps"),z=(0,g.M)(d,"getStaticPaths"),A=(0,g.M)(d,"getServerSideProps"),B=(0,g.M)(d,"config"),C=(0,g.M)(d,"reportWebVitals"),D=(0,g.M)(d,"unstable_getStaticProps"),E=(0,g.M)(d,"unstable_getStaticPaths"),F=(0,g.M)(d,"unstable_getStaticParams"),G=(0,g.M)(d,"unstable_getServerProps"),H=(0,g.M)(d,"unstable_getServerSideProps"),I=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/products",pathname:"/products",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),J=(0,w.U)({srcPage:"/products",config:B,userland:d,routeModule:I,getStaticPaths:z,getStaticProps:y,getServerSideProps:A})},6060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},7910:a=>{a.exports=require("stream")},8732:a=>{a.exports=require("react/jsx-runtime")},9021:a=>{a.exports=require("fs")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[611,550,836,761,918,233],()=>b(b.s=5952));module.exports=c})();