"use strict";(()=>{var a={};a.id=309,a.ids=[309,839],a.modules={361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},918:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>s,default:()=>o,getServerSideProps:()=>r,getStaticPaths:()=>q,getStaticProps:()=>p,handler:()=>A,reportWebVitals:()=>t,routeModule:()=>z,unstable_getServerProps:()=>x,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>u});var e=c(3885),f=c(237),g=c(1413),h=c(5611),i=c.n(h),j=c(625),k=c.n(j),l=c(9961),m=c(2289),n=a([l]);l=(n.then?(await n)():n)[0];let o=(0,g.M)(l,"default"),p=(0,g.M)(l,"getStaticProps"),q=(0,g.M)(l,"getStaticPaths"),r=(0,g.M)(l,"getServerSideProps"),s=(0,g.M)(l,"config"),t=(0,g.M)(l,"reportWebVitals"),u=(0,g.M)(l,"unstable_getStaticProps"),v=(0,g.M)(l,"unstable_getStaticPaths"),w=(0,g.M)(l,"unstable_getStaticParams"),x=(0,g.M)(l,"unstable_getServerProps"),y=(0,g.M)(l,"unstable_getServerSideProps"),z=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/admin",pathname:"/admin",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:l}),A=(0,m.U)({srcPage:"/admin",config:s,userland:l,routeModule:z,getStaticPaths:q,getStaticProps:p,getServerSideProps:r});d()}catch(a){d(a)}})},2015:a=>{a.exports=require("react")},2132:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=c(2015);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},2326:a=>{a.exports=require("react-dom")},3873:a=>{a.exports=require("path")},4075:a=>{a.exports=require("zlib")},6060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},6338:a=>{a.exports=import("js-cookie")},7910:a=>{a.exports=require("stream")},8536:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>i}),c(8732);var e=c(2015);c(4233);var f=c(6338),g=a([f]);f=(g.then?(await g)():g)[0];let h=(0,e.createContext)({user:null,login:async()=>{},logout:async()=>{},loading:!0}),i=()=>(0,e.useContext)(h);d()}catch(a){d(a)}})},8732:a=>{a.exports=require("react/jsx-runtime")},9021:a=>{a.exports=require("fs")},9204:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>k});var e=c(8732),f=c(9918),g=c.n(f),h=c(4233),i=c(8536),j=a([i]);i=(j.then?(await j)():j)[0];let k=({children:a})=>{let b=(0,h.useRouter)(),{user:c,logout:d}=(0,i.A)();if(!c)return null;let f=[{name:"Dashboard",href:"/admin"},{name:"Products",href:"/admin/products"},{name:"Categories",href:"/admin/categories"},{name:"Orders",href:"/admin/orders"},{name:"Blog Posts",href:"/admin/blog"}],j=async()=>{await d(),b.push("/admin/login")};return(0,e.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,e.jsxs)("nav",{className:"fixed top-0 left-0 h-full w-64 bg-white shadow-lg",children:[(0,e.jsx)("div",{className:"px-6 py-4",children:(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Replax Admin"})}),(0,e.jsx)("div",{className:"mt-8",children:f.map(a=>(0,e.jsx)(g(),{href:a.href,children:(0,e.jsx)("a",{className:`block px-6 py-3 text-gray-600 hover:bg-gray-50 hover:text-gray-900 ${b.pathname===a.href?"bg-gray-50 text-gray-900 border-l-4 border-primary":""}`,children:a.name})},a.name))})]}),(0,e.jsxs)("div",{className:"ml-64 min-h-screen",children:[(0,e.jsx)("header",{className:"bg-white shadow",children:(0,e.jsxs)("div",{className:"flex justify-between items-center px-8 py-4",children:[(0,e.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:f.find(a=>a.href===b.pathname)?.name||"Admin Panel"}),(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsx)("span",{className:"text-gray-600",children:c.name}),(0,e.jsx)("button",{onClick:j,className:"px-4 py-2 text-sm text-red-600 hover:text-red-800",children:"Logout"})]})]})}),(0,e.jsx)("main",{className:"p-8",children:a})]})]})};d()}catch(a){d(a)}})},9961:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>m,getServerSideProps:()=>l});var e=c(8732),f=c(2015),g=c(9788),h=c.n(g),i=c(9204),j=c(9964),k=a([i]);i=(k.then?(await k)():k)[0];let l=async a=>{try{let b=(0,j.parseCookies)(a).token;if(!b)return{redirect:{destination:"/admin/login",permanent:!1}};let c=await fetch("http://localhost:5000/api/admin/dashboard",{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch dashboard data");return{props:{stats:await c.json()}}}catch(a){if(console.error("Dashboard error:",a),a instanceof Error&&a.message.toLowerCase().includes("unauthorized"))return{redirect:{destination:"/admin/login",permanent:!1}};return{props:{stats:{totalProducts:0,totalOrders:0,totalRevenue:0,lowStockProducts:0,recentOrders:[]}}}}},m=({stats:a})=>{let[b,c]=(0,f.useState)(!1),[d,g]=(0,f.useState)(null),[k,l]=(0,f.useState)(a),m=async()=>{try{c(!0),g(null);let a=(0,j.parseCookies)().token;if(!a)throw{message:"Authentication required",code:"AUTH_REQUIRED"};let b=await fetch("http://localhost:5000/api/admin/dashboard",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)throw{message:"Failed to fetch dashboard data",code:b.status.toString()};let d=await b.json();l(d)}catch(a){g(a instanceof Error?{message:a.message}:a)}finally{c(!1)}};return(0,e.jsxs)(i.A,{children:[(0,e.jsx)(h(),{children:(0,e.jsx)("title",{children:"Admin Dashboard - Replax"})}),b&&(0,e.jsx)("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-md",children:(0,e.jsx)("p",{className:"text-gray-600",children:"Loading dashboard data..."})}),d&&(0,e.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,e.jsx)("p",{className:"text-red-600",children:d.message})}),(0,e.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Overview"}),(0,e.jsx)("button",{onClick:m,disabled:b,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Refreshing...":"Refresh Dashboard"})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,e.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,e.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Products"}),(0,e.jsx)("p",{className:"text-3xl font-bold mt-2",children:k.totalProducts})]}),(0,e.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,e.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Orders"}),(0,e.jsx)("p",{className:"text-3xl font-bold mt-2",children:k.totalOrders})]}),(0,e.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,e.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Revenue"}),(0,e.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["₹",k.totalRevenue.toLocaleString()]})]}),(0,e.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,e.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Low Stock Products"}),(0,e.jsx)("p",{className:"text-3xl font-bold mt-2",children:k.lowStockProducts})]})]}),(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,e.jsx)("div",{className:"px-6 py-4 border-b",children:(0,e.jsx)("h2",{className:"text-xl font-semibold",children:"Recent Orders"})}),(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"w-full",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{className:"text-left bg-gray-50",children:[(0,e.jsx)("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Number"}),(0,e.jsx)("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,e.jsx)("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,e.jsx)("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,e.jsx)("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,e.jsx)("tbody",{className:"divide-y divide-gray-200",children:k.recentOrders.map(a=>(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:a.orderNumber}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:a.customer.name}),(0,e.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["₹",a.totalAmount.toLocaleString()]}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${"completed"===a.status?"bg-green-100 text-green-800":"pending"===a.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:a.status})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(a.createdAt).toLocaleDateString()})]},a._id))})]})})]})]})};d()}catch(a){d(a)}})},9964:a=>{a.exports=require("nookies")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[611,550,836,918,233],()=>b(b.s=918));module.exports=c})();